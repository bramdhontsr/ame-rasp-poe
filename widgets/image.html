<!doctype html>
<meta charset="utf-8">
<title>AME Image</title>
<style>
  body { margin:0; display:flex; justify-content:center; align-items:center; height:100vh; background:#eee; }
  canvas { border:1px solid #666; }
</style>
<canvas id="c" width="256" height="256"></canvas>
<script>
  // cache-buster
  const V = new URLSearchParams(location.search).get('v') || Date.now();

  const ctx = document.getElementById('c').getContext('2d');

  function draw(r=128,g=128,b=128){
    const img = ctx.createImageData(256,256);
    for(let i=0;i<img.data.length;i+=4){
      img.data[i] = r;
      img.data[i+1] = g;
      img.data[i+2] = b;
      img.data[i+3] = 255;
    }
    ctx.putImageData(img,0,0);
  }

  // init
  draw();

  // luisteren naar updates van sliders
  window.addEventListener('message', ev=>{
    if(ev.data && ev.data.type==="paramsUpdate"){
      draw(ev.data.r, ev.data.g, ev.data.b);
    }
  });
</script>
