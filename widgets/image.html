<!doctype html>
<meta charset="utf-8">
<title>Canvas Widget</title>
<style>
  html,body{height:100%;margin:0;background:#111;display:grid;place-items:center}
  #tag{position:fixed;top:.5rem;left:.5rem;color:#0f0;font:12px/1 system-ui}
</style>
<div id="tag">IMAGE</div>
<canvas id="canvas" width="256" height="256"></canvas>
<script>
const c = document.getElementById("canvas");
const ctx = c.getContext("2d");

function draw(r=128,g=128,b=128){
  const img = ctx.createImageData(c.width,c.height);
  for(let i=0;i<img.data.length;i+=4){
    img.data[i]=r; img.data[i+1]=g; img.data[i+2]=b; img.data[i+3]=255;
  }
  ctx.putImageData(img,0,0);
}
draw();

window.addEventListener("message", ev=>{
  if(ev.data && ev.data.type==="colorUpdate"){
    draw(ev.data.r, ev.data.g, ev.data.b);
  }
});
</script>
